---
title: "网格交易详解"
description: "网格交易配置、策略和计算方法的完整指南"
---

## 网格交易概述

网格交易是一种自动化交易策略，通过在特定价格区间内设置多个买入和卖出订单，形成"网格"状的订单布局。当价格在区间内波动时，系统自动执行交易，获取波动收益。

## 网格交易策略

### 马丁格尔策略 (Martin)

#### 策略原理
马丁格尔策略基于"亏损后加倍"的理念，每次亏损后增加下一笔交易的手数，以期通过一次盈利覆盖之前的所有亏损。

#### 手数计算公式
$$
\text{第i笔订单手数} = \text{基础手数} \times \text{倍率}^i
$$

其中：
- i = 0, 1, 2, 3... (订单序号)
- 基础手数 = 用户设置的初始手数
- 倍率 = 用户设置的递增倍数（默认1.5）

#### 计算示例
假设基础手数0.01，倍率1.5：
- 第1笔: 0.01 × 1.5⁰ = 0.01手
- 第2笔: 0.01 × 1.5¹ = 0.015手  
- 第3笔: 0.01 × 1.5² = 0.0225手
- 第4笔: 0.01 × 1.5³ = 0.034手
- 第5笔: 0.01 × 1.5⁴ = 0.051手

#### 优缺点分析

<CardGroup cols={2}>
  <Card title="优点" icon="check">
    - 理论上能够快速回本
    - 适合震荡市场
    - 盈利潜力较大
  </Card>
  <Card title="缺点" icon="x">
    - 资金需求快速增长
    - 风险随订单数量急剧增加
    - 需要充足的保证金
  </Card>
</CardGroup>

### 等量加仓策略 (Stack)

#### 策略原理
等量加仓策略采用线性递增的方式，每笔订单的手数按固定增量递增，风险相对可控。

#### 手数计算公式
$$
\text{第i笔订单手数} = \text{基础手数} + i \times \text{增量}
$$

其中：
- i = 0, 1, 2, 3... (订单序号)
- 基础手数 = 用户设置的初始手数
- 增量 = 用户设置的递增量（默认0.01）

#### 计算示例
假设基础手数0.01，增量0.01：
- 第1笔: 0.01 + 0×0.01 = 0.01手
- 第2笔: 0.01 + 1×0.01 = 0.02手
- 第3笔: 0.01 + 2×0.01 = 0.03手
- 第4笔: 0.01 + 3×0.01 = 0.04手
- 第5笔: 0.01 + 4×0.01 = 0.05手

#### 优缺点分析

<CardGroup cols={2}>
  <Card title="优点" icon="check">
    - 风险增长相对缓慢
    - 资金需求可预测
    - 适合长期持有
  </Card>
  <Card title="缺点" icon="x">
    - 回本速度较慢
    - 需要更多订单才能覆盖亏损
    - 盈利效率相对较低
  </Card>
</CardGroup>

## 网格配置参数

### 基础参数设置

<Accordion title="网格挂单数量">
**含义**: 网格中的订单总数

**设置范围**: 1-100个

**建议值**: 
- 新手: 3-5个
- 进阶: 5-10个  
- 专业: 10-20个

**影响**: 订单数量越多，覆盖价格范围越广，但资金需求也越大
</Accordion>

<Accordion title="网格间距">
**含义**: 相邻订单之间的价格距离

**单位**: 点数(pips)

**设置范围**: 50-500点

**建议值**:
- 主要货币对: 50-100点
- 交叉货币对: 100-200点
- 贵金属: 200-500点

**计算公式**: 
$$
\text{第i笔订单价格} = \text{起始价格} \pm i \times \text{网格间距} \times \text{点值}
$$
</Accordion>

<Accordion title="与市场价的距离">
**含义**: 第一笔挂单距离当前市价的距离

**单位**: 点数(pips)

**建议值**: 20-100点

**作用**: 避免挂单立即成交，给价格波动留出空间
</Accordion>

### 高级参数设置

<Accordion title="倍率/增量设置">
**马丁格尔模式**:
- 默认倍率: 1.5
- 建议范围: 1.2-2.0
- 风险提示: 倍率越大，风险越高

**等量加仓模式**:
- 默认增量: 0.01
- 建议范围: 0.01-0.1
- 计算方式: 每笔增加固定手数
</Accordion>

## 网格价格计算

### 挂单价格计算

根据选择的挂单类型，系统会自动计算每笔订单的价格：

#### Buy Limit 网格
```
起始价格 = 当前ASK - 距离 × 点值
第i笔价格 = 起始价格 - i × 网格间距 × 点值
```

#### Sell Limit 网格  
```
起始价格 = 当前BID + 距离 × 点值
第i笔价格 = 起始价格 + i × 网格间距 × 点值
```

#### Buy Stop 网格
```
起始价格 = 当前ASK + 距离 × 点值  
第i笔价格 = 起始价格 + i × 网格间距 × 点值
```

#### Sell Stop 网格
```
起始价格 = 当前BID - 距离 × 点值
第i笔价格 = 起始价格 - i × 网格间距 × 点值
```

### 止盈止损计算

每笔网格订单都会自动设置止盈止损：

```
买入订单:
止损价格 = 开仓价格 - max(最小距离, 设置止损) × 点值
止盈价格 = 开仓价格 + max(最小距离, 设置止盈) × 点值

卖出订单:  
止损价格 = 开仓价格 + max(最小距离, 设置止损) × 点值
止盈价格 = 开仓价格 - max(最小距离, 设置止盈) × 点值
```

## 网格交易操作

### 配置网格交易

<Steps>
  <Step title="选择策略">
    在"网格计算方法"中选择Martin或Stack
  </Step>
  <Step title="设置参数">
    配置网格间距、订单数量、倍率/增量等参数
  </Step>
  <Step title="设置距离">
    输入与市场价的距离和止盈止损
  </Step>
  <Step title="选择订单类型">
    点击对应的挂单按钮执行网格交易
  </Step>
</Steps>

### 网格信息预览

点击"配置自定义网格"按钮可以预览网格配置：

#### 预览表格包含
- **序号**: 订单编号
- **货币对**: 交易品种
- **类型**: 订单类型
- **手数**: 计算后的手数
- **价格**: 计算后的挂单价格
- **止损**: 止损价格
- **止盈**: 止盈价格
- **魔号**: 订单标识
- **备注**: 订单注释

## 风险管理

### 资金需求计算

#### 马丁格尔策略资金需求
$$
\text{总资金需求} = \sum_{i=0}^{n-1} \text{基础手数} \times \text{倍率}^i \times \text{保证金比例} \times \text{合约大小}
$$

#### 等量加仓策略资金需求
$$
\text{总资金需求} = \sum_{i=0}^{n-1} (\text{基础手数} + i \times \text{增量}) \times \text{保证金比例} \times \text{合约大小}
$$

### 风险控制建议

<Warning>
**重要风险提示**
- 网格交易适合震荡市场，趋势市场风险较大
- 马丁格尔策略风险较高，需要充足的资金
- 建议先在模拟账户中测试策略
- 设置合理的最大亏损限制
</Warning>

<Tip>
**风险控制技巧**
- 选择波动适中的货币对
- 控制网格订单数量在合理范围
- 定期监控和调整参数
- 避免在重要新闻时段使用
</Tip>

## 适用市场环境

### 理想市场条件

<CardGroup cols={2}>
  <Card title="震荡市场" icon="chart-mixed">
    - **特征**: 价格在一定区间内波动
    - **优势**: 网格订单能够反复成交
    - **收益**: 稳定的波动收益
  </Card>
  
  <Card title="低波动环境" icon="chart-line">
    - **特征**: 价格变化相对平缓
    - **优势**: 风险相对可控
    - **适合**: 等量加仓策略
  </Card>
</CardGroup>

### 不适用环境

<CardGroup cols={2}>
  <Card title="强趋势市场" icon="trending-up">
    - **风险**: 单向持续亏损
    - **问题**: 网格订单无法回本
    - **建议**: 避免使用或及时止损
  </Card>
  
  <Card title="高波动环境" icon="chart-area">
    - **风险**: 价格跳空风险
    - **问题**: 止损可能无效
    - **建议**: 谨慎使用，加强监控
  </Card>
</CardGroup>

## 实战案例

### 案例：EURUSD震荡网格

#### 市场条件
- 货币对: EURUSD
- 当前价格: 1.2000
- 市场状态: 震荡，区间1.1950-1.2050

#### 参数设置
- 策略: 马丁格尔
- 基础手数: 0.01
- 倍率: 1.5
- 网格间距: 20点
- 订单数量: 5个
- 订单类型: Buy Limit

#### 网格布局
| 序号 | 手数 | 价格 | 止损 | 止盈 |
|------|------|------|------|------|
| 1 | 0.01 | 1.1980 | 1.1950 | 1.2010 |
| 2 | 0.015 | 1.1960 | 1.1930 | 1.1990 |
| 3 | 0.023 | 1.1940 | 1.1910 | 1.1970 |
| 4 | 0.034 | 1.1920 | 1.1890 | 1.1950 |
| 5 | 0.051 | 1.1900 | 1.1870 | 1.1930 |

#### 预期收益
在震荡市场中，当价格在设定区间内波动时，网格订单会逐步成交并获利。
