---
title: "自定义风险管理"
description: "按魔术号或货币对进行精细化的风险控制配置和使用"
---

## 功能概述

自定义风险管理提供比账户级控制更精细的风险管理方式，允许用户按魔术号或货币对分组进行独立的风险控制。这种方式特别适合运行多个交易策略或投资多个品种的交易者。

## 两种分组模式

### 魔术号模式

#### 工作原理

按EA的魔术号（Magic Number）对持仓进行分组，每个魔术号的持仓独立计算盈亏并应用风险控制。

#### 适用场景

<CardGroup cols={2}>
  <Card title="多策略交易" icon="graduation-cap">
    **场景**: 同时运行多个不同的EA策略

    **优势**: 每个策略独立风险控制

    **示例**: 网格EA用2025，趋势EA用2026
  </Card>
  <Card title="策略隔离" icon="shield">
    **场景**: 不同风险等级的策略分离

    **优势**: 高风险策略不影响低风险策略

    **示例**: 保守策略和激进策略分开管理
  </Card>
</CardGroup>


### 货币对模式

#### 工作原理

按交易的货币对对持仓进行分组，每个货币对的持仓独立计算盈亏并应用风险控制。

#### 适用场景

<CardGroup cols={2}>
  <Card title="分散投资" icon="chart-mixed">
    **场景**: 投资多个不同的货币对

    **优势**: 控制单一品种的风险敞口

    **示例**: EURUSD、GBPUSD、USDJPY分别控制
  </Card>
  <Card title="品种风险管理" icon="trending-up">
    **场景**: 不同货币对有不同的风险特征

    **优势**: 针对性的风险控制策略

    **示例**: 主要货币对和交叉货币对分别管理
  </Card>
</CardGroup>


## 风险控制参数

### 自定义浮盈控制

#### 功能说明

监控选定分组（魔术号或货币对）的浮盈，当浮盈超过设定值时自动平仓该分组的所有持仓。

#### 触发条件

$$
\text{分组浮盈} > \text{自定义浮盈阈值} \rightarrow \text{平仓该分组}
$$

#### 应用策略

<Accordion title="分级利润保护">
  **策略**: 不同分组设置不同的利润保护水平

  **实现**: 为高风险策略设置较低的利润保护阈值

  **示例**:

  - 保守策略: 浮盈300美元平仓
  - 激进策略: 浮盈500美元平仓

  **优势**: 根据策略特性优化利润保护
</Accordion>

<Accordion title="动态利润管理">
  **策略**: 根据分组表现动态调整利润阈值

  **方法**: 表现好的分组提高阈值，表现差的降低阈值

  **监控**: 定期评估各分组的盈利能力

  **调整**: 每月或每季度调整一次参数
</Accordion>

### 自定义浮亏控制

#### 功能说明

监控选定分组的浮亏，当浮亏超过设定值时自动平仓该分组的所有持仓。

#### 触发条件

$$
\text{分组浮盈} < -|\text{自定义浮亏阈值}| \rightarrow \text{平仓该分组}
$$

#### 风险控制策略

<CardGroup cols={2}>
  <Card title="分组止损" icon="shield-x">
    **目的**: 限制单个分组的最大亏损

    **设置**: 根据分组的风险特征设定

    **优势**: 防止单一策略或品种的过度亏损
  </Card>
  <Card title="资金分配保护" icon="pie-chart">
    **目的**: 保护分配给特定分组的资金

    **计算**: 分组资金 × 风险比例

    **优势**: 确保资金分配计划的执行
  </Card>
</CardGroup>

## 分组管理操作

### 添加魔术号

<Steps>
  <Step title="选择魔术号模式">
    在"选择列表"中选择"Magic"单选按钮
  </Step>
  <Step title="打开魔术号列表">
    点击"添加魔号"区域的列表控件
  </Step>
  <Step title="输入魔术号">
    在输入框中输入要监控的魔术号（如2025）
  </Step>
  <Step title="确认添加">
    点击确认按钮将魔术号添加到监控列表
  </Step>
</Steps>

### 添加货币对

<Steps>
  <Step title="选择货币对模式">
    在"选择列表"中选择"Symbol"单选按钮
  </Step>
  <Step title="打开货币对列表">
    点击"添加货币"区域的列表控件
  </Step>
  <Step title="输入货币对">
    在输入框中输入要监控的货币对（如EURUSD）
  </Step>
  <Step title="确认添加">
    点击确认按钮将货币对添加到监控列表
  </Step>
</Steps>

### 列表管理功能

#### 添加项目

- **输入验证**: 系统会验证输入的有效性
- **重复检查**: 防止添加重复的项目
- **即时生效**: 添加后立即开始监控

#### 删除项目

- **选择删除**: 在列表中选择要删除的项目
- **确认删除**: 点击删除按钮确认操作
- **停止监控**: 删除后立即停止对该项目的监控

## 实际应用案例

### 案例1：多EA策略管理

#### 场景描述

- **EA1**: 网格交易策略，魔术号2025，保守型
- **EA2**: 趋势跟踪策略，魔术号2026，激进型
- **EA3**: 套利策略，魔术号2027，稳健型

#### 风险控制设置

**魔术号列表**: 2025, 2026, 2027

**参数配置**:

```
自定义浮盈控制: +$800 (启用)
自定义浮亏控制: -$500 (启用)
```

#### 监控效果

- 每个EA独立计算盈亏
- 任一EA浮盈超过800美元时该EA全部平仓
- 任一EA浮亏超过500美元时该EA全部平仓
- 不同EA之间不相互影响

### 案例2：多品种投资管理

#### 场景描述

- **主要货币对**: EURUSD, GBPUSD, USDJPY
- **交叉货币对**: EURJPY, GBPJPY
- **商品货币**: AUDUSD, NZDUSD

#### 风险控制设置

**货币对列表**: EURUSD, GBPUSD, USDJPY, EURJPY, GBPJPY, AUDUSD, NZDUSD

**参数配置**:

```
自定义浮盈控制: +$600 (启用)
自定义浮亏控制: -$400 (启用)
```

#### 监控效果

- 每个货币对独立计算盈亏
- 单一货币对浮盈超过600美元时该品种全部平仓
- 单一货币对浮亏超过400美元时该品种全部平仓
- 有效控制单一品种的风险敞口

## 参数设置建议

### 魔术号模式参数

#### 基于策略风险等级

<CardGroup cols={3}>
  <Card title="保守策略" icon="shield-check">
    **浮盈**: 账户的1-2%

    **浮亏**: 账户的0.5-1%

    **特点**: 严格控制，稳健收益
  </Card>
  <Card title="平衡策略" icon="scale-balanced">
    **浮盈**: 账户的2-4%

    **浮亏**: 账户的1-2%

    **特点**: 风险收益平衡
  </Card>
  <Card title="激进策略" icon="trending-up">
    **浮盈**: 账户的4-8%

    **浮亏**: 账户的2-4%

    **特点**: 追求高收益
  </Card>
</CardGroup>

### 货币对模式参数

#### 基于品种特性

| 货币对类型     | 浮盈设置 | 浮亏设置 | 风险特征      |
| --------- | ---- | ---- | --------- |
| **主要货币对** | 较高   | 较高   | 流动性好，波动适中 |
| **交叉货币对** | 中等   | 中等   | 波动较大，需谨慎  |
| **商品货币**  | 较低   | 较低   | 受商品价格影响大  |
| **新兴市场**  | 最低   | 最低   | 高波动，高风险   |

## 监控和优化

### 性能评估

<Tip>
  **分组表现分析**:

  - 定期统计各分组的盈亏情况
  - 分析触发风险控制的频率
  - 评估参数设置的合理性
  - 根据表现调整风险参数
</Tip>

### 优化策略

<Warning>
  **参数调整原则**:

  - 表现良好的分组可适当放宽限制
  - 频繁触发止损的分组应收紧控制
  - 根据市场环境调整风险参数
  - 保持不同分组间的风险平衡
</Warning>

## 注意事项

<AccordionGroup>
  <Accordion title="模式切换的影响">
    在魔术号和货币对模式之间切换时：

    - 之前的监控列表会被清空
    - 需要重新添加监控项目
    - 建议在无持仓时进行切换
  </Accordion>
  <Accordion title="分组重叠问题">
    如果同一持仓属于多个监控分组：

    - 系统会按照添加顺序进行检查
    - 第一个满足条件的分组会触发平仓
    - 建议避免分组重叠以免混淆
  </Accordion>
  <Accordion title="参数同步问题">
    所有分组使用相同的浮盈浮亏参数：

    - 无法为不同分组设置不同参数
    - 需要根据最严格的要求设置参数
    - 考虑使用多个风险控制实例
  </Accordion>
</AccordionGroup>