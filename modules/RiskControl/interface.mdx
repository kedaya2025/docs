---
title: "界面操作指南"
description: "风险控制模块界面元素和控件的详细操作说明"
---

## 界面总览

风险控制模块采用垂直布局设计，将所有风险管理功能集中在一个紧凑的面板中。界面分为四个主要区域，每个区域都有明确的功能分工和视觉区分。

## 面板尺寸和布局

### 基本尺寸
- **总宽度**: 358px (350px + 8px边距)
- **总高度**: 564px
- **标题栏高度**: 30px
- **内容区域**: 350px × 534px

### 布局结构
```
┌─────────────────────────────────────┐
│           标题栏 (30px)              │
├─────────────────────────────────────┤
│        账户管理区域 (140px)          │
├─────────────────────────────────────┤
│        定时平仓区域 (80px)           │
├─────────────────────────────────────┤
│       自定义风险区域 (200px)         │
├─────────────────────────────────────┤
│        列表管理区域 (144px)          │
└─────────────────────────────────────┘
```

## 标题栏区域

### 标题显示

<CardGroup cols={2}>
  <Card title="中文界面" icon="language">
    **显示**: "TraderCopilot - 风险控制"
    
    **字体**: Microsoft YaHei
    
    **位置**: 左对齐，垂直居中
  </Card>
  
  <Card title="英文界面" icon="globe">
    **显示**: "TraderCopilot - Risk Control"
    
    **字体**: Arial
    
    **位置**: 左对齐，垂直居中
  </Card>
</CardGroup>

### 关闭按钮
- **位置**: 标题栏右侧
- **尺寸**: 20×20像素
- **功能**: 关闭风险控制面板
- **样式**: X图标，鼠标悬停时高亮

## 账户管理区域

### 区域标题

<Accordion title="分组标题">
**中文**: "账户管理(满足任意条件关闭持仓)"

**英文**: "Account Manage(Close positions)"

**样式**: 绿色背景，白色文字

**功能**: 标识该区域的功能范围
</Accordion>

### 复选框编辑控件

风险控制使用特殊的复选框编辑控件，结合了启用/禁用和数值输入功能：

#### 控件结构
```
[✓] 总浮盈高于(USD)≈+3.00% [____500____]
```

#### 组成部分

<CardGroup cols={3}>
  <Card title="复选框" icon="check-square">
    **功能**: 启用/禁用该风险控制
    
    **状态**: 勾选=启用，未勾选=禁用
    
    **位置**: 控件左侧
  </Card>
  
  <Card title="标签文本" icon="tag">
    **功能**: 描述风险控制类型
    
    **内容**: 包含货币单位和百分比
    
    **位置**: 复选框右侧
  </Card>
  
  <Card title="输入框" icon="edit">
    **功能**: 设置具体的数值
    
    **验证**: 自动验证输入范围
    
    **位置**: 控件右侧
  </Card>
</CardGroup>

### 四个风险控制项

#### 总浮盈控制

<Accordion title="控件详情">
**标识**: m_prefix + "ACCOUNT_PROFIT"

**标签**: 
- 中文: "总浮盈高于(货币)≈百分比%"
- 英文: "Total Profit >(货币)百分比%"

**输入范围**: 0 到无限大

**默认值**: 500

**百分比计算**: (设定值/账户余额) × 100%
</Accordion>

#### 总浮亏控制

<Accordion title="控件详情">
**标识**: m_prefix + "ACCOUNT_LOSS"

**标签**: 
- 中文: "总浮亏低于(货币)≈百分比%"
- 英文: "Total Profit &lt;(货币)百分比%"

**输入范围**: 负数值

**默认值**: -500

**百分比计算**: (设定值/账户余额) × 100%
</Accordion>

#### 净值控制

<Accordion title="控件详情">
**标识**: m_prefix + "ACCOUNT_EQUITY"

**标签**: 
- 中文: "净值高于(货币)≈百分比%"
- 英文: "Equity >(货币)百分比%"

**输入范围**: 0 到无限大

**默认值**: 1000

**百分比计算**: (设定值/账户余额) × 100%
</Accordion>

#### 余额控制

<Accordion title="控件详情">
**标识**: m_prefix + "ACCOUNT_BALANCE"

**标签**: 
- 中文: "余额高于(货币)≈百分比%"
- 英文: "Balance >(货币)百分比%"

**输入范围**: 0 到无限大

**默认值**: 50000

**百分比计算**: (设定值/账户余额) × 100%
</Accordion>

## 定时平仓区域

### 启用复选框

<CardGroup cols={2}>
  <Card title="功能控制" icon="toggle-on">
    **标识**: m_prefix + "USE_TIMEVIEW"
    
    **标签**: 
    - 中文: "使用每日定时计划"
    - 英文: "Use a daily scheduled schedule"
    
    **默认**: 未勾选（禁用）
  </Card>
  
  <Card title="分组标题" icon="clock">
    **标签**: 
    - 中文: "每日定时平仓(电脑时间)"
    - 英文: "Daily scheduled closing(PC Time)"
    
    **样式**: 绿色背景分组框
  </Card>
</CardGroup>

### 时间选择器

#### 时间输入控件

<Accordion title="控件特性">
**标识**: m_prefix + "TIME_VIEW"

**标签**: 
- 中文: "执行的时间 (HH:MM)"
- 英文: "Time of execution (HH:MM)"

**格式**: HH:MM（24小时制）

**默认值**: "20:30"

**验证**: 自动验证时间格式的有效性
</Accordion>

#### 操作方法

<Steps>
  <Step title="点击输入框">
    点击时间输入框激活编辑模式
  </Step>
  <Step title="输入时间">
    按HH:MM格式输入时间（如15:30）
  </Step>
  <Step title="确认输入">
    按回车键或点击其他区域确认
  </Step>
  <Step title="验证结果">
    系统会验证时间格式并显示结果
  </Step>
</Steps>

## 自定义风险区域

### 模式选择

#### 单选按钮组

<CardGroup cols={2}>
  <Card title="Magic模式" icon="wand-magic-sparkles">
    **标识**: m_prefix + "CUSTOM"[0]
    
    **功能**: 按魔术号分组管理
    
    **默认**: 选中状态
  </Card>
  
  <Card title="Symbol模式" icon="coins">
    **标识**: m_prefix + "CUSTOM"[1]
    
    **功能**: 按货币对分组管理
    
    **默认**: 未选中状态
  </Card>
</CardGroup>

#### 选择操作
- **互斥选择**: 只能选择一种模式
- **即时生效**: 选择后立即切换模式
- **列表清空**: 切换模式时清空现有列表

### 自定义风险参数

#### 自定义浮盈控制

<Accordion title="控件配置">
**标识**: m_prefix + "CUSTOM_PROFIT"

**标签**: 
- 中文: "浮盈超过(货币)≈百分比%"
- 英文: "Profit >(货币)百分比%"

**输入范围**: 0 到无限大

**默认值**: 500

**应用范围**: 选定的魔术号或货币对分组
</Accordion>

#### 自定义浮亏控制

<Accordion title="控件配置">
**标识**: m_prefix + "CUSTOM_LOSS"

**标签**: 
- 中文: "浮亏超过(货币)≈百分比%"
- 英文: "Loss &lt;(货币)百分比%"

**输入范围**: 负数值

**默认值**: -500

**应用范围**: 选定的魔术号或货币对分组
</Accordion>

## 列表管理区域

### 双列表布局

界面底部包含两个并排的列表控件：

#### 魔术号列表

<CardGroup cols={2}>
  <Card title="基本信息" icon="list">
    **标识**: m_prefix + "VIEV_MAG"
    
    **标题**: 
    - 中文: "添加魔号"
    - 英文: "Add Magic"
    
    **位置**: 左半部分
  </Card>
  
  <Card title="尺寸规格" icon="ruler">
    **宽度**: 175px (总宽度的一半)
    
    **高度**: 144px (6行 × 24px)
    
    **可见行数**: 5行
    
    **行高**: 24px
  </Card>
</CardGroup>

#### 货币对列表

<CardGroup cols={2}>
  <Card title="基本信息" icon="list">
    **标识**: m_prefix + "VIEV_SYM"
    
    **标题**: 
    - 中文: "添加货币"
    - 英文: "Add Symbol"
    
    **位置**: 右半部分
  </Card>
  
  <Card title="尺寸规格" icon="ruler">
    **宽度**: 175px (总宽度的一半)
    
    **高度**: 144px (6行 × 24px)
    
    **可见行数**: 5行
    
    **行高**: 24px
  </Card>
</CardGroup>

### 列表操作

#### 添加项目

<Steps>
  <Step title="选择列表">
    根据当前模式选择对应的列表
  </Step>
  <Step title="点击添加">
    点击列表顶部的"添加"按钮
  </Step>
  <Step title="输入内容">
    在弹出的输入框中输入魔术号或货币对
  </Step>
  <Step title="确认添加">
    点击确认按钮完成添加
  </Step>
</Steps>

#### 删除项目

<Steps>
  <Step title="选择项目">
    在列表中点击要删除的项目
  </Step>
  <Step title="确认选择">
    被选中的项目会高亮显示
  </Step>
  <Step title="点击删除">
    点击删除按钮
  </Step>
  <Step title="确认删除">
    确认删除操作
  </Step>
</Steps>

## 拖拽功能

### 面板拖拽

<Accordion title="拖拽操作">
**拖拽区域**: 标题栏区域

**操作方法**: 
1. 在标题栏按下鼠标左键
2. 保持按下状态移动鼠标
3. 在目标位置释放鼠标

**移动范围**: 整个图表窗口区域

**位置记忆**: 系统会记住面板的新位置
</Accordion>

### 拖拽限制

- **边界检查**: 防止面板拖拽到屏幕外
- **最小可见**: 确保标题栏始终可见
- **自动调整**: 屏幕分辨率变化时自动调整位置

## 响应式设计

### 字体自适应

系统会根据屏幕DPI自动调整字体大小：

```cpp
int AutoFont() {
    int dpi = GetDeviceCaps(GetDC(GetDesktopWindow()), LOGPIXELSX);
    return (dpi > 96) ? (fontsize * dpi / 96) : fontsize;
}
```

### 多语言支持

- **自动切换**: 根据系统语言自动切换界面语言
- **字体适配**: 中文使用Microsoft YaHei，英文使用Arial
- **布局调整**: 根据文字长度自动调整控件宽度

## 颜色方案

### 主要颜色

| 元素类型 | 颜色值 | 用途 |
|----------|--------|------|
| **分组标题背景** | 绿色 (Lime) | 区域标识 |
| **分组标题文字** | 白色 | 标题文字 |
| **输入框背景** | 白色 | 数据输入 |
| **输入框边框** | 灰色 | 边界定义 |
| **复选框选中** | 橙色 | 状态指示 |

### 状态指示

- **启用状态**: 复选框显示勾选标记
- **禁用状态**: 复选框显示空白
- **输入焦点**: 输入框边框高亮
- **鼠标悬停**: 按钮颜色变化
