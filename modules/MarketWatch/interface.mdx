---
title: "界面操作指南"
description: "市场分析模块界面元素和交互功能的详细说明"
---

## 界面总览

市场分析模块采用紧凑的垂直布局设计，所有功能都集中在一个主面板中，便于用户快速访问各项功能。界面支持拖拽移动和多语言显示。

## 主面板结构

### 标题栏区域

<CardGroup cols={2}>
  <Card title="模块标识" icon="tag">
    **显示内容**: "Market Analysis" 或 "市场分析"
    
    **功能**: 标识当前模块
    
    **拖拽**: 点击标题栏可拖拽整个面板
  </Card>
  
  <Card title="关闭按钮" icon="x">
    **位置**: 标题栏右侧
    
    **功能**: 关闭市场分析面板
    
    **样式**: 20x20像素的X图标
  </Card>
</CardGroup>

### 券商选择区域

#### 按钮布局
券商按钮水平排列在面板顶部：

```
[综合] [FXCM] [OANDA] [其他券商...]
```

#### 按钮状态

<Accordion title="选中状态">
**颜色**: 紫色 (RGB: 128, 0, 255)

**效果**: 按钮高亮显示

**功能**: 表示当前查看的数据源
</Accordion>

<Accordion title="默认状态">
**颜色**: 深灰色 (RGB: 68, 68, 68) - 综合数据按钮

**颜色**: 灰色 - 其他券商按钮

**功能**: 可点击切换的状态
</Accordion>

#### 切换操作

<Steps>
  <Step title="点击券商按钮">
    点击要查看的券商按钮
  </Step>
  <Step title="按钮状态变化">
    选中的按钮变为紫色，其他按钮恢复默认颜色
  </Step>
  <Step title="数据更新">
    情绪表格自动更新为选中券商的数据
  </Step>
  <Step title="界面刷新">
    整个面板重新绘制显示新数据
  </Step>
</Steps>

## 情绪表格详解

### 表格尺寸和布局

| 列名 | 宽度 | 对齐方式 | 内容类型 |
|------|------|----------|----------|
| **货币对** | 85px | 左对齐 | 文本 |
| **情绪条** | 300px | 居中 | 图形 |
| **行动** | 90px | 居中 | 数值+按钮 |

**总宽度**: 475px  
**行高**: 24px  
**背景色**: 白烟色 (WhiteSmoke)  
**网格线**: 银色 (Silver)

### 货币对列

#### 显示内容
- **标准货币对**: EURUSD, GBPUSD, USDJPY 等
- **交叉货币对**: EURJPY, GBPJPY, EURGBP 等
- **贵金属**: XAUUSD, XAGUSD 等

#### 交互功能

<Accordion title="点击切换图表">
**操作**: 点击货币对名称

**效果**: 当前图表切换到该货币对

**条件**: 货币对必须在经纪商的交易品种中

**实现**: 调用 `ChartSetSymbolPeriod(0, symbol, PERIOD_CURRENT)`
</Accordion>

### 情绪条列

#### 可视化设计

情绪条采用双色设计：

```
[绿色区域 - 买入比例][红色区域 - 卖出比例]
```

#### 比例计算

$$
\text{绿色区域宽度} = 300px \times \frac{\text{买入比例}}{100\%}
$$

$$
\text{红色区域宽度} = 300px \times \frac{\text{卖出比例}}{100\%}
$$

#### 颜色含义

<CardGroup cols={2}>
  <Card title="绿色区域" icon="trending-up">
    **含义**: 看多情绪 (买入比例)
    
    **计算**: 买入比例 = 看多交易者 / 总交易者
    
    **范围**: 0% - 100%
  </Card>
  
  <Card title="红色区域" icon="trending-down">
    **含义**: 看空情绪 (卖出比例)
    
    **计算**: 卖出比例 = 100% - 买入比例
    
    **范围**: 0% - 100%
  </Card>
</CardGroup>

### 行动列

#### 显示内容
- **数值**: 买入比例的具体百分比
- **格式**: "XX%" (如 "65%")
- **颜色**: 根据比例值动态变化

#### 交互功能

<Accordion title="点击直接交易">
**触发区域**: 整个行动列区域

**交易逻辑**:
```cpp
if (买入比例 >= 60%) {
    执行卖出操作 (反向策略)
} else if (买入比例 <= 40%) {
    执行买入操作 (反向策略)  
}
```

**参数来源**: 使用交易设置面板中的配置参数
</Accordion>

## 控制按钮区域

### 功能按钮

<CardGroup cols={2}>
  <Card title="UPDATE 按钮" icon="refresh">
    **功能**: 手动更新市场情绪数据
    
    **位置**: 面板底部左侧
    
    **效果**: 立即从网络获取最新数据
  </Card>
  
  <Card title="AUTO 复选框" icon="robot">
    **功能**: 启用/禁用自动交易
    
    **状态**: 勾选=启用，未勾选=禁用
    
    **影响**: 控制自动交易系统的运行
  </Card>
  
  <Card title="TRADE 按钮" icon="gear">
    **功能**: 打开交易设置面板
    
    **位置**: 面板底部
    
    **效果**: 展开详细的交易参数配置
  </Card>
</CardGroup>

### 状态信息显示

#### 更新时间显示

<Accordion title="时间格式">
**中文格式**: "上次更新: X 分钟前"

**英文格式**: "Last Update: X minutes ago"

**位置**: 面板底部

**更新**: 每次数据刷新后自动更新
</Accordion>

#### 连接状态指示

<CardGroup cols={3}>
  <Card title="正常" icon="check-circle">
    **条件**: 数据更新成功
    
    **显示**: 正常的时间戳
    
    **颜色**: 默认文字颜色
  </Card>
  
  <Card title="延迟" icon="clock">
    **条件**: 数据更新延迟
    
    **显示**: 较大的分钟数
    
    **提示**: 可能需要检查网络
  </Card>
  
  <Card title="错误" icon="x-circle">
    **条件**: 数据获取失败
    
    **显示**: 错误提示信息
    
    **操作**: 点击UPDATE重试
  </Card>
</CardGroup>

## 交易设置面板

### 面板展开

当点击"TRADE"按钮时，设置面板会在主面板右侧展开：

#### 面板尺寸
- **宽度**: 260px
- **高度**: 动态计算（约400-500px）
- **位置**: 主面板右侧，间距为一个步长

#### 面板结构
1. **标题栏**: "市场情绪交易设置" / "Market Trade Setting"
2. **货币对选择**: 复选框组，选择交易品种
3. **参数设置**: 触发百分比、手数、止盈止损
4. **反向信号**: 策略选择开关

### 参数输入控件

#### 数值输入框

<CardGroup cols={2}>
  <Card title="触发百分比" icon="percentage">
    **标签**: "触发订单百分比%" / "Trigger percentage%"
    
    **范围**: 0-100
    
    **默认**: 60
  </Card>
  
  <Card title="订单手数" icon="scale-balanced">
    **标签**: "订单手数" / "Order Lot"
    
    **范围**: 0-100
    
    **默认**: 0.01
  </Card>
  
  <Card title="止损点数" icon="shield">
    **标签**: "止损点数" / "Stop loss(pips)"
    
    **范围**: 0-1000000
    
    **默认**: 0
  </Card>
  
  <Card title="止盈点数" icon="target">
    **标签**: "止盈点数" / "Take Profit(pips)"
    
    **范围**: 0-1000000
    
    **默认**: 0
  </Card>
</CardGroup>

#### 复选框控件

<Accordion title="货币对选择">
**功能**: 选择参与自动交易的货币对

**布局**: 垂直列表，每个货币对一个复选框

**默认**: 全部未选中

**建议**: 选择1-3个熟悉的货币对
</Accordion>

<Accordion title="反向信号">
**标签**: "使用反向信号" / "Use reverse signal"

**警告**: "谨慎开启" / "Open with caution"

**默认**: 关闭（使用反向策略）

**开启**: 使用正向跟随策略
</Accordion>

## 拖拽功能

### 主面板拖拽

<Steps>
  <Step title="点击标题栏">
    在主面板的标题栏区域按下鼠标
  </Step>
  <Step title="拖拽移动">
    保持按下状态移动鼠标
  </Step>
  <Step title="释放定位">
    在目标位置释放鼠标完成移动
  </Step>
  <Step title="位置记忆">
    系统会记住面板的新位置
  </Step>
</Steps>

### 设置面板拖拽

设置面板也支持独立拖拽：

- **拖拽区域**: 设置面板的标题栏
- **移动范围**: 整个图表区域
- **关联性**: 与主面板独立移动

## 多语言支持

### 语言切换

界面文字会根据系统语言设置自动切换：

#### 中文界面
- 模块标题: "市场分析"
- 更新时间: "上次更新: X 分钟前"
- 设置标题: "市场情绪交易设置"

#### 英文界面  
- 模块标题: "Market Analysis"
- 更新时间: "Last Update: X minutes ago"
- 设置标题: "Market Trade Setting"

### 字体和大小

- **字体**: 系统默认字体
- **大小**: 根据DPI自动调整
- **编码**: 支持Unicode字符显示

## 响应式设计

### DPI适配

界面元素会根据系统DPI设置自动调整：

```cpp
int AutoFont() {
    int dpi = GetDeviceCaps(GetDC(GetDesktopWindow()), LOGPIXELSX);
    return (dpi > 96) ? (fontsize * dpi / 96) : fontsize;
}
```

### 屏幕适配

- **最小分辨率**: 1024x768
- **推荐分辨率**: 1920x1080或更高
- **多显示器**: 支持多显示器环境
