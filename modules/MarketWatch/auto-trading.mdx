---
title: "自动交易系统"
description: "基于市场情绪的自动交易配置和策略设置"
---

## 功能概述

自动交易系统是市场分析模块的核心功能之一，它基于实时的市场情绪数据自动执行交易决策。系统支持正向和反向两种交易策略，可以根据用户设定的参数自动开仓、设置止盈止损，实现无人值守的智能交易。

## 交易策略原理

### 反向情绪策略（默认）

#### 策略逻辑
基于"群体总是错误"的市场理念：

```
当买入比例 ≥ 触发值时 → 执行卖出操作
当买入比例 ≤ (100% - 触发值)时 → 执行买入操作
```

#### 触发条件计算

**默认触发值为60%**：

$$
\text{卖出信号} = \text{买入比例} \geq 60\%
$$

$$
\text{买入信号} = \text{买入比例} \leq 40\%
$$

#### 策略优势
- **逆向思维**: 利用群体心理的偏差获利
- **风险分散**: 避免跟随大众的羊群效应
- **适合震荡**: 在震荡市场中表现较好

### 正向跟随策略

#### 策略逻辑
跟随市场情绪方向交易：

```
当买入比例 ≥ 触发值时 → 执行买入操作
当买入比例 ≤ (100% - 触发值)时 → 执行卖出操作
```

#### 适用场景
- **趋势市场**: 强势趋势中情绪与价格同向
- **突破交易**: 情绪确认价格突破的有效性
- **动量策略**: 利用情绪推动的价格动量

## 自动交易配置

### 打开设置面板

<Steps>
  <Step title="点击交易按钮">
    在市场分析面板中点击"TRADE"按钮
  </Step>
  <Step title="设置面板展开">
    系统会在右侧展开"市场情绪交易设置"面板
  </Step>
  <Step title="配置参数">
    在设置面板中配置各项交易参数
  </Step>
  <Step title="启用自动交易">
    勾选"AUTO"复选框启用自动交易
  </Step>
</Steps>

### 核心参数设置

#### 货币对选择

<Accordion title="选择交易品种">
**功能**: 选择参与自动交易的货币对

**操作**: 在货币对列表中勾选要交易的品种

**建议**: 
- 新手选择1-3个主要货币对
- 避免选择过多品种分散注意力
- 优先选择流动性好的货币对
</Accordion>

#### 触发百分比

<Accordion title="设置触发条件">
**参数名**: Trigger percentage%

**默认值**: 60%

**范围**: 50% - 90%

**计算公式**:
```
反向策略:
卖出触发 = 买入比例 ≥ 触发百分比
买入触发 = 买入比例 ≤ (100% - 触发百分比)

正向策略:
买入触发 = 买入比例 ≥ 触发百分比  
卖出触发 = 买入比例 ≤ (100% - 触发百分比)
```

**设置建议**:
- **保守**: 70-80% (信号较少但质量高)
- **平衡**: 60-70% (默认推荐)
- **激进**: 50-60% (信号较多但噪音大)
</Accordion>

#### 订单参数

<CardGroup cols={2}>
  <Card title="订单手数" icon="scale-balanced">
    **参数**: Order Lot
    
    **默认**: 0.01手
    
    **范围**: 0.01 - 100手
    
    **建议**: 根据账户资金合理设置
  </Card>
  
  <Card title="止损点数" icon="shield">
    **参数**: Stop loss(pips)
    
    **默认**: 0 (不设置)
    
    **建议**: 20-100点
    
    **计算**: 自动考虑最小距离限制
  </Card>
  
  <Card title="止盈点数" icon="target">
    **参数**: Take Profit(pips)
    
    **默认**: 0 (不设置)
    
    **建议**: 30-150点
    
    **比例**: 建议止盈:止损 = 1.5:1 或 2:1
  </Card>
  
  <Card title="反向信号" icon="refresh">
    **参数**: Use reverse signal
    
    **默认**: 关闭 (使用反向策略)
    
    **开启**: 使用正向跟随策略
    
    **警告**: 谨慎开启，适合趋势市场
  </Card>
</CardGroup>

## 交易执行机制

### 信号检测流程

<Steps>
  <Step title="数据更新">
    系统每5分钟检查一次市场情绪数据更新
  </Step>
  <Step title="信号扫描">
    遍历所有选中的货币对，检查是否满足触发条件
  </Step>
  <Step title="重复检查">
    确认该货币对当前没有持仓（避免重复开仓）
  </Step>
  <Step title="市场验证">
    验证货币对可交易性和价格有效性
  </Step>
  <Step title="执行交易">
    满足所有条件时自动执行交易
  </Step>
</Steps>

### 价格计算公式

#### 买入订单计算

```cpp
开仓价格 = 当前ASK价格
止损价格 = ASK - max(最小距离, 设置止损) × 点值
止盈价格 = ASK + max(最小距离, 设置止盈) × 点值
```

#### 卖出订单计算

```cpp
开仓价格 = 当前BID价格  
止损价格 = BID + max(最小距离, 设置止损) × 点值
止盈价格 = BID - max(最小距离, 设置止盈) × 点值
```

### 风险控制机制

#### 重复开仓防护

```cpp
if (该货币对已有持仓) {
    跳过交易信号;
    继续检查下一个货币对;
}
```

#### 市场状态检查

<CardGroup cols={2}>
  <Card title="交易模式验证" icon="check-circle">
    确认货币对允许交易：
    - SYMBOL_TRADE_MODE_FULL: 完全交易 ✓
    - SYMBOL_TRADE_MODE_DISABLED: 禁止交易 ✗
  </Card>
  
  <Card title="价格时效性" icon="clock">
    检查最新价格数据：
    - 数据时间 < 300秒: 有效 ✓
    - 数据时间 ≥ 300秒: 过期 ✗
  </Card>
</CardGroup>

## 手动交易功能

### 点击交易

除了自动交易，系统还支持手动点击交易：

<Steps>
  <Step title="定位目标">
    在情绪表格中找到要交易的货币对
  </Step>
  <Step title="点击行动列">
    点击该货币对右侧的"行动"列（显示买入比例的区域）
  </Step>
  <Step title="自动判断">
    系统根据当前买入比例自动判断交易方向
  </Step>
  <Step title="执行交易">
    使用设置面板中的参数执行交易
  </Step>
</Steps>

### 手动交易逻辑

```cpp
if (买入比例 >= 60%) {
    执行卖出操作; // 反向策略
} else if (买入比例 <= 40%) {
    执行买入操作; // 反向策略
}
```

## 策略优化建议

### 参数调优

<Tip>
**触发百分比优化**:
- 回测不同触发值的历史表现
- 根据货币对特性调整参数
- 考虑市场环境的影响
- 定期评估和调整设置
</Tip>

### 风险管理

<Warning>
**重要风险提醒**:
- 设置合理的止损保护资金
- 控制同时交易的货币对数量
- 避免在重要新闻时段使用
- 定期监控和调整策略表现
</Warning>

### 市场环境适应

#### 震荡市场
- **触发值**: 60-70%
- **策略**: 反向情绪策略
- **止盈止损**: 较小的点数设置

#### 趋势市场  
- **触发值**: 70-80%
- **策略**: 考虑正向跟随
- **止盈止损**: 较大的点数设置

## 监控和管理

### 交易监控

<Steps>
  <Step title="查看持仓">
    定期检查自动交易产生的持仓
  </Step>
  <Step title="评估表现">
    分析自动交易的盈亏情况
  </Step>
  <Step title="调整参数">
    根据表现调整交易参数
  </Step>
  <Step title="风险控制">
    必要时手动干预或关闭自动交易
  </Step>
</Steps>

### 性能评估指标

- **胜率**: 盈利交易占总交易的比例
- **盈亏比**: 平均盈利与平均亏损的比值
- **最大回撤**: 策略的最大亏损幅度
- **夏普比率**: 风险调整后的收益率

## 注意事项

<AccordionGroup>
  <Accordion title="网络依赖性">
    自动交易依赖稳定的网络连接获取情绪数据，网络中断会影响交易信号的及时性
  </Accordion>
  
  <Accordion title="数据延迟">
    情绪数据可能存在5-15分钟的延迟，在快速变化的市场中需要注意
  </Accordion>
  
  <Accordion title="市场异常">
    在极端市场条件下（如重大新闻、市场恐慌），情绪数据可能失效
  </Accordion>
  
  <Accordion title="资金管理">
    确保账户有足够的保证金支持自动交易，避免因资金不足导致交易失败
  </Accordion>
</AccordionGroup>
